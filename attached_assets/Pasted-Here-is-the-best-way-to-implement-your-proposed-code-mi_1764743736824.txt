Here is the best way to implement your proposed code migration system:

1. Back-End Process: Code Generation & Mapping
This happens completely on your server and only involves your UYP and BoxStat databases.

A. Create the Lookup Table

You will generate a temporary/migration lookup table in the BoxStat database. Each entry will contain the following four critical pieces of information:

Unique Migration Code	UYP Customer Email	Stripe Customer ID	Stripe Subscription ID	Status
BOXSTAT-ABCD	jane.doe@email.com	cus_ABC123	sub_XYZ789	Unredeemed
BOXSTAT-EFGH	john.smith@email.com	cus_DEF456	sub_PQR321	Unredeemed
Action: Export your list of active Stripe subscriptions from the UYP system. For each one, generate a random, unique, and long alphanumeric code (e.g., 10-12 characters, or prefixed like BOXSTAT-XXXX). Import this mapping into the BoxStat database.

B. Distribute the Codes

This is the only customer-facing action outside the app.

Action: Send a clear, dedicated email to every existing UYP subscriber (using the email address on file) that contains:

A clear explanation of the app migration to BoxStat.

The unique Migration Code they must use.

Simple instructions on where to enter the code during registration in the new BoxStat app.

An assurance that their next billing date will remain the same, and they will not be double-charged.

2. Front-End Logic: Redemption in the BoxStat App
The BoxStat app needs a specific flow to handle this code.

A. The Registration Path

New User Registration: A customer clicks to register in BoxStat.

Code Prompt: On the registration screen (or a dedicated 'Subscription Link' screen), you provide the option: "Already an existing UYP subscriber?"

Code Entry: The customer enters their unique Migration Code.

B. The Code Validation (Server-Side)

The BoxStat server handles the validation:

Lookup: The server receives the code and immediately searches the Migration Lookup Table for a match where the Status is Unredeemed.

If Code Invalid/Already Used: The server returns an error ("Code not recognized or already claimed. Contact support.").

If Code Found (e.g., BOXSTAT-ABCD): The server retrieves the linked Stripe Customer and Subscription IDs.

Account Creation & Linking:

The server creates the new BoxStat user account.

The Stripe Customer ID (cus_ABC123) and Subscription ID (sub_XYZ789) are permanently saved to the new BoxStat user's profile record.

The BoxStat user is immediately granted access to the paid content.

Status Update: The server updates the record in the Migration Lookup Table:

The Status is changed from Unredeemed to Redeemed.

The BoxStat User ID of the new account is permanently saved to the row to audit who claimed the code.

This process gives your customers a single, clean mechanism to link their paid subscription to their new account, making the transition secure and easy.